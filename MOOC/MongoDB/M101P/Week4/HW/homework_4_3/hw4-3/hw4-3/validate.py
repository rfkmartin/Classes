import base64
code = "CmltcG9ydCBweW1vbmdvCmltcG9ydCByYW5kb20KaW1wb3J0IHJlCmltcG9ydCBzdHJpbmcKaW1wb3J0IHN5cwppbXBvcnQgZ2V0b3B0CmltcG9ydCBwcHJpbnQKCiMgQ29weXJpZ2h0IDIwMTIKIyAxMGdlbiwgSW5jLgojIEF1dGhvcjogQW5kcmV3IEVybGljaHNvbiAgIGFqZUAxMGdlbi5jb20KIwojIElmIHlvdSBhcmUgYSBzdHVkZW50IGFuZCByZWFkaW5nIHRoaXMgY29kZSwgdHVybiBiYWNrIG5vdywgYmVmb3JlCiMgdGhlIE1vbmdvREIgZ29kcyBzbWl0ZSB5b3UuCgpjb25uZWN0aW9uID0gTm9uZQpkYiA9IE5vbmUKd2ViaG9zdCA9ICJsb2NhbGhvc3Q6ODA4MiIKbW9uZ29zdHIgPSAibW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNyIKZGJfbmFtZSA9ICJibG9nIgoKIyB0aGlzIHNjcmlwdCB3aWxsIGNoZWNrIHRoYXQgaG9tZXdvcmsgNC4zCgojIGNvbW1hbmQgbGluZSBhcmcgcGFyc2luZyB0byBtYWtlIGZvbGtzIGhhcHB5IHdobyB3YW50IHRvIHJ1biBhdCBtb25nb2xhYnMgb3IgbW9uZ29ocQojIHRoaXMgZnVuY3Rpb25zIHVzZXMgZ2xvYmFsIHZhcnMgdG8gY29tbXVuaWNhdGUuIGZvcmdpdmUgbWUuCmRlZiBhcmdfcGFyc2luZyhhcmd2KToKCiAgICBnbG9iYWwgd2ViaG9zdAogICAgZ2xvYmFsIG1vbmdvc3RyCiAgICBnbG9iYWwgZGJfbmFtZQoKICAgIHRyeToKICAgICAgICBvcHRzLCBhcmdzID0gZ2V0b3B0LmdldG9wdChhcmd2LCAiLXA6LW06LWQ6IikKICAgIGV4Y2VwdCBnZXRvcHQuR2V0b3B0RXJyb3I6CiAgICAgICAgcHJpbnQgInVzYWdlIHZhbGlkYXRlLnB5IC1wIHdlYmhvc3QgLW0gbW9uZ29Db25uZWN0U3RyaW5nIC1kIGRhdGFiYXNlTmFtZSIKICAgICAgICBwcmludCAiXHRtb25nb0Nvbm5lY3Rpb25TdHJpbmcgZGVmYXVsdCB0byB7MH0iLmZvcm1hdChtb25nb3N0cikKICAgICAgICBwcmludCAiXHRkYXRhYmFzZU5hbWUgZGVmYXVsdHMgdG8gezB9Ii5mb3JtYXQoZGJfbmFtZSkKICAgICAgICBzeXMuZXhpdCgyKQogICAgZm9yIG9wdCwgYXJnIGluIG9wdHM6CiAgICAgICAgaWYgKG9wdCA9PSAnLWgnKToKICAgICAgICAgICAgcHJpbnQgInVzYWdlIHZhbGlkYXRlLnB5IC1tIG1vbmdvQ29ubmVjdFN0cmluZyAtZCBkYXRhYmFzZU5hbWUiCiAgICAgICAgICAgIHN5cy5leGl0KDIpCiAgICAgICAgZWxpZiBvcHQgaW4gKCItbSIpOgogICAgICAgICAgICBtb25nb3N0ciA9IGFyZwogICAgICAgICAgICBwcmludCAiT3ZlcnJpZGluZyBNb25nb0RCIGNvbm5lY3Rpb24gc3RyaW5nIHRvIGJlICIsIG1vbmdvc3RyCiAgICAgICAgZWxpZiBvcHQgaW4gKCItZCIpOgogICAgICAgICAgICBkYl9uYW1lID0gYXJnCiAgICAgICAgICAgIHByaW50ICJPdmVycmlkaW5nIE1vbmdvREIgZGF0YWJhc2UgdG8gYmUgIiwgZGJfbmFtZQoKCmRlZiBnZXRfbnVtX3NjYW5uZWQoZXhwbGFpbik6CiAgICBpZiAnbnNjYW5uZWRPYmplY3RzJyBpbiBleHBsYWluOiAgIyBUcnkgMi42IG1ldGhvZAogICAgICAgIHJldHVybiBleHBsYWluWyduc2Nhbm5lZE9iamVjdHMnXQogICAgIyBBc3N1bWUgd2UgY2FuIHVzZSB0aGUgMy4wIG1ldGhvZAogICAgcmV0dXJuIGV4cGxhaW5bJ2V4ZWN1dGlvblN0YXRzJ11bJ3RvdGFsRG9jc0V4YW1pbmVkJ10KCgojIGNoZWNrIHRvIHNlZSBpZiB0aGV5IGxvYWRlZCB0aGUgZGF0YSBzZXQKZGVmIGNoZWNrX2Zvcl9kYXRhX2ludGVncml0eSgpOgoKICAgIHBvc3RzID0gZGIucG9zdHMKICAgIHRyeToKICAgICAgICBjb3VudCA9IHBvc3RzLmNvdW50KCkKICAgIGV4Y2VwdDoKICAgICAgICBwcmludCAiY2FuJ3QgcXVlcnkgTW9uZ29EQi4uaXMgaXQgcnVubmluZz8iCiAgICAgICAgcmFpc2UKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBpZiAoY291bnQgIT0gMTAwMCk6CiAgICAgICAgcHJpbnQgIlRoZXJlIGFyZSBzdXBwb3NlZCB0byBiZSAxMDAwIGRvY3VtZW50cy4geW91IGhhdmUgIiwgY291bnQKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICAjIGZpbmQgdGhlIG1vc3QgcG9wdWxhciB0YWdzCiAgICB0cnk6CgogICAgICAgIHJlc3VsdCA9IHBvc3RzLmFnZ3JlZ2F0ZShbeyckcHJvamVjdCc6eyd0YWdzJzoxfX0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7JyR1bndpbmQnOickdGFncyd9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyckZ3JvdXAnOnsnX2lkJzogJyR0YWdzJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NvdW50Jzp7JyRzdW0nOjF9fX0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7JyRzb3J0Jzp7J2NvdW50JzotMX19LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyckbGltaXQnOjEwfV0pCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQgImNhbid0IHF1ZXJ5IE1vbmdvREIuLmlzIGl0IHJ1bm5pbmc/IgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIHRyeToKICAgICAgICBmaXJzdCA9IHJlc3VsdC5uZXh0KCkKICAgIGV4Y2VwdCBTdG9wSXRlcmF0aW9uOgogICAgICAgIHByaW50ICJUaGUgZGF0YXNldCBpcyBub3QgcHJvcGVybHkgbG9hZGVkLiBUaGUgZGlzdHJpYnV0aW9uIG9mIHBvc3QgdGFncyBpcyB3cm9uZy4iCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgaWYgZmlyc3RbJ2NvdW50J10gIT0gMTMgYW5kIGZpcnN0WydfaWQnXSAhPSAnc3BoeW54JzoKICAgICAgICBwcmludCAiVGhlIGRhdGFzZXQgaXMgbm90IHByb3Blcmx5IGxvYWRlZC4gVGhlIGRpc3RyaWJ1dGlvbiBvZiBwb3N0IHRhZ3MgaXMgd3JvbmcuIgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIHByaW50ICJEYXRhIGxvb2tzIGxpa2UgaXQgaXMgcHJvcGVybHkgbG9hZGVkIGludG8gdGhlIHBvc3RzIGNvbGxlY3Rpb24iCgogICAgcmV0dXJuIFRydWUKCgpkZWYgY2hlY2tfZm9yX2Zhc3RfYmxvZ19ob21lX3BhZ2UoKToKCiAgICBwb3N0cyA9IGRiLnBvc3RzCgogICAgdHJ5OgogICAgICAgIGV4cGxhaW4gPSBwb3N0cy5maW5kKCkuc29ydCgnZGF0ZScsIGRpcmVjdGlvbj0tMSkubGltaXQoMTApLmV4cGxhaW4oKQogICAgZXhjZXB0OgogICAgICAgIHByaW50ICJjYW4ndCBxdWVyeSBNb25nb0RCLi5pcyBpdCBydW5uaW5nPyIKICAgICAgICByYWlzZQogICAgICAgIHJldHVybiBGYWxzZQoKICAgIG51bV9zY2FubmVkID0gZ2V0X251bV9zY2FubmVkKGV4cGxhaW4pCiAgICBpZiAobnVtX3NjYW5uZWQgPiAxMCk6CiAgICAgICAgcHJpbnQgIlNvcnJ5LCBleGVjdXRpbmcgdGhlIHF1ZXJ5IHRvIGRpc3BsYXkgdGhlIGhvbWUgcGFnZSBpcyB0b28gc2xvdy4gIgogICAgICAgIHByaW50ICJXZSBzaG91bGQgYmUgc2Nhbm5pbmcgbm8gbW9yZSB0aGFuIDEwIGRvY3VtZW50cy4gWW91IHNjYW5uZWQiLCBudW1fc2Nhbm5lZAogICAgICAgIHByaW50ICJoZXJlIGlzIHRoZSBvdXRwdXQgZnJvbSBleHBsYWluIgoKICAgICAgICBwcCA9IHBwcmludC5QcmV0dHlQcmludGVyKGRlcHRoPTYpCiAgICAgICAgcHAucHByaW50KGV4cGxhaW4pCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgcHJpbnQgIkhvbWUgcGFnZSBpcyBzdXBlciBmYXN0LiBOaWNlIGpvYi5cbiIKICAgIHJldHVybiBUcnVlCgpkZWYgZ2V0X3RoZV9taWRkbGVfcGVybWFsaW5rKCk6CiAgICBwb3N0cyA9IGRiLnBvc3RzCiAgICB0cnk6CiAgICAgICAgYyA9IHBvc3RzLmZpbmQoKS5za2lwKDUwMCkubGltaXQoMSkKICAgICAgICBmb3IgZG9jIGluIGM6CiAgICAgICAgICAgIHBlcm1hbGluayA9IGRvY1sncGVybWFsaW5rJ10KICAgICAgICAgICAgcmV0dXJuIHBlcm1hbGluawogICAgZXhjZXB0OgogICAgICAgIHByaW50ICJjYW4ndCBxdWVyeSBNb25nb0RCLi5pcyBpdCBydW5uaW5nPyIKICAgICAgICByYWlzZQogICAgcmV0dXJuICIiCgpkZWYgY2hlY2tfZm9yX2Zhc3RfYmxvZ19lbnRyeV9wYWdlKCk6CgogICAgcG9zdHMgPSBkYi5wb3N0cwoKICAgIHBlcm1hbGluayA9IGdldF90aGVfbWlkZGxlX3Blcm1hbGluaygpCiAgICB0cnk6CiAgICAgICAgZXhwbGFpbiA9IHBvc3RzLmZpbmQoeydwZXJtYWxpbmsnOnBlcm1hbGlua30pLmV4cGxhaW4oKQogICAgZXhjZXB0OgogICAgICAgIHByaW50ICJjYW4ndCBxdWVyeSBNb25nb0RCLi5pcyBpdCBydW5uaW5nPyIKICAgICAgICByYWlzZQogICAgICAgIHJldHVybiBGYWxzZQoKICAgIG51bV9zY2FubmVkID0gZ2V0X251bV9zY2FubmVkKGV4cGxhaW4pCiAgICBpZiAobnVtX3NjYW5uZWQgPiAxKToKICAgICAgICBwcmludCAiU29ycnksIGV4ZWN1dGluZyB0aGUgcXVlcnkgdG8gcmV0cmlldmUgYSBwb3N0IGJ5IHBlcm1hbGluayBpcyB0b28gc2xvdyAiCiAgICAgICAgcHJpbnQgIldlIHNob3VsZCBiZSBzY2FubmluZyBubyBtb3JlIHRoYW4gMSBkb2N1bWVudHMuIFlvdSBzY2FubmVkIiwgbnVtX3NjYW5uZWQKICAgICAgICBwcmludCAiaGVyZSBpcyB0aGUgb3V0cHV0IGZyb20gZXhwbGFpbiIKCiAgICAgICAgcHAgPSBwcHJpbnQuUHJldHR5UHJpbnRlcihkZXB0aD02KQogICAgICAgIHBwLnBwcmludChleHBsYWluKQogICAgICAgIHJldHVybiBGYWxzZQoKICAgIHByaW50ICJCbG9nIHJldHJpZXZhbCBieSBwZXJtYWxpbmsgaXMgc3VwZXIgZmFzdC4gTmljZSBqb2IuXG4iCiAgICByZXR1cm4gVHJ1ZQoKCmRlZiBjaGVja19mb3JfZmFzdF9wb3N0c19ieV90YWdfcGFnZSgpOgogICAgcG9zdHMgPSBkYi5wb3N0cwoKICAgIHRhZyA9ICJzcGh5bngiCiAgICB0cnk6CiAgICAgICAgZXhwbGFpbiA9IHBvc3RzLmZpbmQoeyd0YWdzJzp0YWd9KS5zb3J0KCdkYXRlJywgZGlyZWN0aW9uPS0xKS5saW1pdCgxMCkuZXhwbGFpbigpCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQgImNhbid0IHF1ZXJ5IE1vbmdvREIuLmlzIGl0IHJ1bm5pbmc/IgogICAgICAgIHJhaXNlCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgbnVtX3NjYW5uZWQgPSBnZXRfbnVtX3NjYW5uZWQoZXhwbGFpbikKICAgIGlmIChudW1fc2Nhbm5lZCA+IDEwKToKICAgICAgICBwcmludCAiU29ycnksIGV4ZWN1dGluZyB0aGUgcXVlcnkgdG8gcmV0cmlldmUgcG9zdHMgYnkgdGFnIGlzIHRvbyBzbG93LiIKICAgICAgICBwcmludCAiV2Ugc2hvdWxkIGJlIHNjYW5uaW5nIG5vIG1vcmUgdGhhbiAxMCBkb2N1bWVudHMuIFlvdSBzY2FubmVkIiwgbnVtX3NjYW5uZWQKICAgICAgICBwcmludCAiaGVyZSBpcyB0aGUgb3V0cHV0IGZyb20gZXhwbGFpbiIKCiAgICAgICAgcHAgPSBwcHJpbnQuUHJldHR5UHJpbnRlcihkZXB0aD02KQogICAgICAgIHBwLnBwcmludChleHBsYWluKQogICAgICAgIHJldHVybiBGYWxzZQoKICAgIHByaW50ICJCbG9nIHJldHJpZXZhbCBieSB0YWcgaXMgc3VwZXIgZmFzdC4gTmljZSBqb2IuXG4iCiAgICByZXR1cm4gVHJ1ZQoKCiMgbWFpbiBzZWN0aW9uIG9mIHRoZSBjb2RlCmRlZiBtYWluKGFyZ3YpOgoKICAgIGFyZ19wYXJzaW5nKGFyZ3YpCiAgICBnbG9iYWwgY29ubmVjdGlvbgogICAgZ2xvYmFsIGRiCgogICAgcHJpbnQgIldlbGNvbWUgdG8gdGhlIEhXIDQuMyBDaGVja2VyLiBNeSBqb2IgaXMgdG8gbWFrZSBzdXJlIHlvdSBhZGRlZCB0aGUgaW5kZXhlcyIKICAgIHByaW50ICJ0aGF0IG1ha2UgdGhlIGJsb2cgZmFzdCBpbiB0aGUgZm9sbG93aW5nIHRocmVlIHNpdHVhdGlvbnMiCiAgICBwcmludCAiXHRXaGVuIHNob3dpbmcgdGhlIGhvbWUgcGFnZSIKICAgIHByaW50ICJcdFdoZW4gZmV0Y2hpbmcgYSBwYXJ0aWN1bGFyIHBvc3QiCiAgICBwcmludCAiXHRXaGVuIHNob3dpbmcgYWxsIHBvc3RzIGZvciBhIHBhcnRpY3VsYXIgdGFnIgoKICAgICMgY29ubmVjdCB0byB0aGUgZGIgKG1vbmdvc3RyIHdhcyBzZXQgaW4gYXJnX3BhcnNpbmcpCiAgICB0cnk6CiAgICAgICAgY29ubmVjdGlvbiA9IHB5bW9uZ28uTW9uZ29DbGllbnQobW9uZ29zdHIpCiAgICAgICAgZGIgPSBjb25uZWN0aW9uW2RiX25hbWVdCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcHJpbnQgImNhbid0IGNvbm5lY3QgdG8gTW9uZ29EQiB1c2luZyIsIG1vbmdvc3RyLCAiLiBJcyBpdCBydW5uaW5nPyIKICAgICAgICBwcmludCAiRXhjZXB0aW9uIHdhcyIsIGUKICAgICAgICBzeXMuZXhpdCgxKQoKICAgIGlmIChub3QgY2hlY2tfZm9yX2RhdGFfaW50ZWdyaXR5KCkpOgogICAgICAgIHByaW50ICJTb3JyeSwgdGhlIGRhdGEgc2V0IGlzIG5vdCBsb2FkZWQgY29ycmVjdGx5IGluIHRoZSBwb3N0cyBjb2xsZWN0aW9uIgogICAgICAgIHN5cy5leGl0KDEpCgogICAgaWYgKG5vdCBjaGVja19mb3JfZmFzdF9ibG9nX2hvbWVfcGFnZSgpKToKICAgICAgICBwcmludCAiU29ycnksIHRoZSBxdWVyeSB0byBkaXNwbGF5IHRoZSBibG9nIGhvbWUgcGFnZSBpcyB0b28gc2xvdy4iCiAgICAgICAgc3lzLmV4aXQoMSkKCiAgICBpZiAobm90IGNoZWNrX2Zvcl9mYXN0X2Jsb2dfZW50cnlfcGFnZSgpKToKICAgICAgICBwcmludCAiU29ycnksIHRoZSBxdWVyeSB0byByZXRyaWV2ZSBhIGJsb2cgcG9zdCBieSBwZXJtYWxpbmsgaXMgdG9vIHNsb3cuIgogICAgICAgIHN5cy5leGl0KDEpCgogICAgaWYgKG5vdCBjaGVja19mb3JfZmFzdF9wb3N0c19ieV90YWdfcGFnZSgpKToKICAgICAgICBwcmludCAiU29ycnksIHRoZSBxdWVyeSB0byByZXRyaWV2ZSBhbGwgcG9zdHMgd2l0aCBhIGNlcnRhaW4gdGFnIGlzIHRvbyBzbG93IgogICAgICAgIHN5cy5leGl0KDEpCgogICAgIyBpZiB5b3UgYXJlIHJlYWRpbmcgdGhpcyBpbiBjbGVhcnRleHQsIHlvdSBhcmUgdmlvbGF0aW5nIHRoZSBob25vciBjb2RlLgogICAgIyBZb3UgY2FuIHN0aWxsIHJlZGVlbSB5b3Vyc2VsZi4gR2V0IGl0IHdvcmtpbmcgYW5kIGRvbid0IHN1Ym1pdCB0aGUgdmFsaWRhdGlvbiBjb2RlIHVudGlsIHlvdSBkby4KICAgICMgQWxsIGEgbWFuIGhhcyBhdCB0aGUgZW5kIG9mIHRoZSBkYXkgaXMgaGlzIHdvcmQuCiAgICBwcmludCAiVGVzdHMgUGFzc2VkIGZvciBIVyA0LjMuIFlvdXIgSFcgNC4zIHZhbGlkYXRpb24gY29kZSBpcyA4OTNqZm5zMjlmNzI4Zm4yOWYyMGYyIgoKCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgbWFpbihzeXMuYXJndlsxOl0pCg=="
eval(compile(base64.b64decode(code), "<string>", 'exec'))
